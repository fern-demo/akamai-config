(function(){"use strict";let o,x;if(typeof window<"u"&&window.React&&window.ReactDOM)console.log("ğŸ” Using global React and ReactDOM"),o=window.React,x=window.ReactDOM;else try{o=require("react"),x=require("react-dom"),console.log("ğŸ” Using imported React and ReactDOM")}catch(c){console.error("âŒ React and ReactDOM not available:",c)}const k=()=>{const[d,R]=o.useState(8),[L,p]=o.useState("all"),[y,I]=o.useState(""),[C,D]=o.useState([]),[S,F]=o.useState([]),[E,M]=o.useState([]),l=o.useCallback(()=>{const n=document.querySelectorAll(".filter-card");return Array.from(n).map((i,f)=>{const r=i.querySelector(".filter-data");return{element:i,index:f,category:r?r.dataset.category:"",tags:r&&r.dataset.tags||"",text:i.textContent.toLowerCase()}})},[]);o.useEffect(()=>{const n=l();D(n)},[l]);const e=o.useCallback((n,h,i=!1)=>{console.log(`ğŸ” Filtering: category=${n}, search="${h}"`),i&&R(8);const f=l();D(f);const r=f.filter(g=>{const v=n==="all"||g.category===n,T=!h||g.text.includes(h.toLowerCase())||g.tags.toLowerCase().includes(h.toLowerCase());return v&&T});F(r);const w=Math.min(i?8:d,r.length),m=r.slice(0,w);M(m),f.forEach(g=>{m.some(T=>T.element===g.element)?(g.element.classList.remove("hidden"),g.element.style.display=""):(g.element.classList.add("hidden"),g.element.style.display="none")}),console.log(`ğŸ” Showing ${m.length} of ${r.length} matching products`)},[d,l]),t=o.useCallback((n,h)=>{p(n),document.querySelectorAll(".td-sidebar-item").forEach(w=>{w.classList.remove("td-active"),w.dataset.category===n&&w.classList.add("td-active")});const f=document.querySelector(".td-main-hdr");f&&(f.textContent=h);const r=document.getElementById("mx-filter-dropdown");r&&(r.value=n),e(n,y,!0)},[y,e]),a=o.useCallback(n=>{I(n),e(L,n,!0)},[L,e]),u=o.useCallback(()=>{const n=d+8;R(n);const h=S.slice(0,n);M(h),C.forEach(i=>{h.some(r=>r.element===i.element)?(i.element.classList.remove("hidden"),i.element.style.display=""):(i.element.classList.add("hidden"),i.element.style.display="none")})},[d,S,C]);o.useEffect(()=>{console.log("ğŸ” Initializing React filter system");const n=document.querySelectorAll(".td-sidebar-item"),h=m=>{const g=m.currentTarget.dataset.category,v=m.currentTarget.querySelector("span").textContent;t(g,v)};n.forEach(m=>{m.addEventListener("click",h)});const i=document.getElementById("mx-filter-dropdown"),f=m=>{const g=m.target.value,v=m.target.options[m.target.selectedIndex].text;t(g,v)};i&&i.addEventListener("change",f);const r=document.getElementById("main-search"),w=m=>{a(m.target.value)};return r?(r.addEventListener("input",w),console.log("ğŸ” React search and filter system ready")):console.log("âŒ Search input not found"),e("all","",!0),()=>{n.forEach(m=>{m.removeEventListener("click",h)}),i&&i.removeEventListener("change",f),r&&r.removeEventListener("input",w)}},[t,a,e]);const s=()=>S.length>8&&E.length<S.length?o.createElement("div",{className:"show-more-btn",style:{textAlign:"center",margin:"2rem 0"}},o.createElement("button",{onClick:u,className:"show-more-button",style:{margin:"2rem auto",display:"block",padding:"0.75rem 1.5rem",background:"transparent",border:"1px solid #ddd",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s ease",fontFamily:"inherit",color:"inherit"}},"Load more")):null,b=()=>(o.useEffect(()=>{console.log("ğŸ” Results count:",`${E.length} of ${C.length} products visible`)},[E.length,C.length]),null);return o.createElement("div",{className:"react-filter-component"},[o.createElement(b,{key:"counter"}),o.createElement(s,{key:"button"})])};console.log("ğŸ” React Filter Component loader initialized");function A(){if(console.log("ğŸ” Attempting to initialize React Filter Component"),!o||!x){console.error("âŒ React or ReactDOM not available. Falling back to vanilla JS."),window.initVanillaFilter?window.initVanillaFilter():console.error("âŒ No fallback filter available");return}let c=document.getElementById("react-filter-container");if(!c){const d=document.querySelector(".td-main-body")||document.body;if(d)c=document.createElement("div"),c.id="react-filter-container",c.style.display="none",d.appendChild(c),console.log("ğŸ” Created filter container element");else{console.log("âŒ Could not find main body to attach filter container");return}}try{x.render(o.createElement(k),c),console.log("âœ… React Filter Component successfully mounted")}catch(d){console.error("âŒ Error mounting React Filter Component:",d)}}function q(){document.readyState==="interactive"||document.readyState==="complete"?setTimeout(A,100):document.addEventListener("DOMContentLoaded",()=>{setTimeout(A,100)})}function _(){let c=window.location.href;new MutationObserver(()=>{window.location.href!==c&&(c=window.location.href,console.log("ğŸ” Navigation detected, re-initializing filter"),setTimeout(A,200))}).observe(document.body,{childList:!0,subtree:!0})}q(),_(),window.initializeReactFilter=A,console.log("ğŸ” Vanilla JS Filter fallback loaded");function B(){console.log("ğŸ” Initializing vanilla filter system");const c=8;let d=c,R="all",L="",p=[],y=[];function I(){const l=document.querySelectorAll(".filter-card");return Array.from(l).map((e,t)=>{const a=e.querySelector(".filter-data");return{element:e,index:t,category:a?a.dataset.category:"",tags:a&&a.dataset.tags||"",text:e.textContent.toLowerCase()}})}function C(l,e,t=!1){console.log(`ğŸ” Filtering: category=${l}, search="${e}"`),t&&(d=c),p=I(),y=p.filter(s=>{const b=l==="all"||s.category===l,n=!e||s.text.includes(e.toLowerCase())||s.tags.toLowerCase().includes(e.toLowerCase());return b&&n});const a=Math.min(d,y.length),u=y.slice(0,a);p.forEach(s=>{u.some(n=>n.element===s.element)?(s.element.classList.remove("hidden"),s.element.style.display=""):(s.element.classList.add("hidden"),s.element.style.display="none")}),E(),console.log(`ğŸ” Showing ${u.length} of ${y.length} matching products`)}function D(l,e){R=l,document.querySelectorAll(".td-sidebar-item").forEach(s=>{s.classList.remove("td-active"),s.dataset.category===l&&s.classList.add("td-active")});const a=document.querySelector(".td-main-hdr");a&&(a.textContent=e);const u=document.getElementById("mx-filter-dropdown");u&&(u.value=l),C(l,L,!0)}function S(l){L=l,C(R,l,!0)}function F(){d+=c;const l=Math.min(d,y.length),e=y.slice(0,l);p.forEach(t=>{e.some(u=>u.element===t.element)?(t.element.classList.remove("hidden"),t.element.style.display=""):(t.element.classList.add("hidden"),t.element.style.display="none")}),E()}function E(){const l=y.length>c&&d<y.length;let e=document.getElementById("vanilla-load-more-container");if(l){if(!e){e=document.createElement("div"),e.id="vanilla-load-more-container",e.className="show-more-btn",e.style.textAlign="center",e.style.margin="2rem 0";const t=document.createElement("button");t.className="show-more-button",t.textContent="Load more",t.style.margin="2rem auto",t.style.display="block",t.style.padding="0.75rem 1.5rem",t.style.background="transparent",t.style.border="1px solid #ddd",t.style.borderRadius="6px",t.style.cursor="pointer",t.style.fontSize="1rem",t.style.transition="all 0.2s ease",t.style.fontFamily="inherit",t.style.color="inherit",t.addEventListener("click",F),e.appendChild(t),(document.querySelector(".td-main-body")||document.body).appendChild(e)}}else e&&e.remove()}function M(){document.querySelectorAll(".td-sidebar-item").forEach(a=>{a.addEventListener("click",u=>{const s=u.currentTarget.dataset.category,b=u.currentTarget.querySelector("span").textContent;D(s,b)})});const e=document.getElementById("mx-filter-dropdown");e&&e.addEventListener("change",a=>{const u=a.target.value,s=a.target.options[a.target.selectedIndex].text;D(u,s)});const t=document.getElementById("main-search");t?(t.addEventListener("input",a=>{S(a.target.value)}),console.log("ğŸ” Vanilla search and filter system ready")):console.log("âŒ Search input not found"),C("all","",!0)}M()}window.initVanillaFilter=B})();
